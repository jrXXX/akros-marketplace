openapi: 3.0.3
info:
  title: Akros Marketplace
  version: 1.0.0-SNAPSHOT
  description: YAML Swagger Configuration for the Akros Marketplace

paths:
  /listFieldTypeDefinition:
    get:
      summary: List the field type definitions
      description: helper function only
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/FieldTypeDefinitionDTO'

  /listThemes:
    get:
      summary: List the themes
      description: used for primary search page
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/VWThemeResponseDTO'

  /listThemeSearchFieldTypes/{themeId}:
    get:
      summary: List the search field types for one theme
      description: used for primary search page
      parameters:
        - name: themeId
          in: path
          required: true
          description: Foreign Key ID to Theme.
          schema:
            type: integer
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/FieldTypeResponseDTO'

  /listTopicFieldTypes/{themeId}/{search}:
    get:
      summary: List the field types to edit and add another search/offer topic 
      description: used to get the fields to add a new topic
      parameters:
        - name: themeId
          in: path
          required: true
          description: Foreign Key ID to Theme.
          schema:
            type: integer
        - name: search
          in: path
          required: true
          description: true=search-topic, false=offer-topic
          schema:
            type: boolean
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/FieldTypeResponseDTO'

  /saveTopic:
    post:
      summary: Save a topic 
      description: Save a topic
      requestBody:
        description: All values to save a topic
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TopicStoreDTO'
        required: true
      responses:
        200:
          description: OK
      
components:
  schemas:
    FieldTypeDefinitionDTO:
      type: object
      properties:
        fieldTypeDefinitionId:
          type: integer
          format: int64
        description:
          type: string
          example: Parkplatz

    VWThemeResponseDTO:
      type: object
      properties:
        themeId:
          type: integer
          format: int64
        description:
          type: string
          example: Unterkuenfte
        searchCount:
          type: integer
          example: 5
        offerCount:
          type: integer
          example: 5

    FieldTypeResponseDTO:
      type: object
      properties:
        fieldTypeId:
          type: integer
          format: int64
        fieldTypeDefinitionId:
          type: integer
          format: int64
        fieldTypeDefinitionDescription:
          type: string
          example: Number
        description:
          type: string
          example: Beschreibung
        shortDescription:
          type: string
          example: Beschreibung der Unterkunft
        minValue:
          type: integer
          example: 5
        maxValue:
          type: integer
          example: 5
        search:
          type: boolean
          example: false
        offer:
          type: boolean
          example: false
        fieldTypeChooses:
          type: array
          items:
            $ref: '#/components/schemas/FieldTypeChooseDTO'

    FieldTypeChooseDTO:
      type: object
      properties:
        fieldTypeChooseId:
          type: integer
          format: int64
        description:
          type: string
        sortNumber:
          type: integer

    TopicStoreDTO:
      type: object
      properties:
        topicId:
          type: integer
          format: int64
        themeId:
          type: integer
          format: int64
        searchOrOffer:
          type: string
          example: OFFER
        topicValueStores:
          type: array
          items:
            $ref: '#/components/schemas/TopicValueStoreDTO'

    TopicValueStoreDTO:
      type: object
      properties:
        fieldTypeId:
          type: integer
          format: int64
        valueNum:
          type: double
          format: int64
        valueVarchar:
          type: string
        valueDate:
          type: date
